version: 2

models:
  - name: stg_customers
    columns:
      - name: customer_id
        description: The customer unique identifier.
        data_tests:
          - unique
          - not_null
  - name: stg_orders
    columns:
      - name: order_id
        description: The order identifier.
        data_tests:
          - unique
          - not_null
      - name: order_status
        description: The order status. Updates evertime that a change in the order happens.
        data_tests:
          - accepted_values:
              values:
                - created
                - shipped
                - approved
                - canceled
                - invoiced
                - delivered
                - processing
                - unavailable
      - name: customer_id
        description: The customer unique identifier.
        data_tests:
          - relationships:
              to: ref('stg_customers')
              field: customer_id
  - name: stg_products
    columns:
      - name: product_id
        description: The product identifier.
        data_tests:
          - unique
          - not_null
      - name: name
        description: The product name.
        data_tests:
          - unique
          - not_null
      - name: collection
        description: The prodcut collection.
        data_tests:
          - accepted_values:
              values:
                - stargazers
                - binaryville
                - lil' monsters
                - tech heroes
      - name: category
        description: The product category.
        data_tests:
          - accepted_values:
              values:
                - hats
                - aprons
                - framed arts
                - magnets
                - mugs
                - notebooks
                - pillows
                - posters
                - t-shirts
                - tote bags
                - trading cards
      - name: price
        description: The product price value.
        data_tests:
          - not_null
      - name: availability
        description: Status of the product in the stock.
        test:
          - not_ull
      - name: rating
        description: Product ranting by users.
        test:
          - not_ull
  - name: stg_order_items
    columns:
      - name: order_id
        description: The order identifier.
        data_tests:
          - unique
          - not_null
      - name: product_price
        description: The product price.
        data_tests:
          - unique
          - not_null
      - name: product_id
        description: The product unique identifier.
        data_tests:
          - relationships:
              to: ref('stg_products')
              field: product_id
